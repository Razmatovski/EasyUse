# –¢–ó (Markdown): –õ–µ–Ω–¥–∏–Ω–≥ ¬´≈Åazienka pod klucz ‚Äî Wroc≈Çaw +30 km¬ª —Å –∫–≤–∏–∑-–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –ª–∏–¥–∞–º–∏ (PL/EN/UA), –∫–ª–∏–µ–Ω—Ç—ã ‚Äî WhatsApp/e-mail, –∞–¥–º–∏–Ω ‚Äî Telegram

## 0) –†–æ–ª—å –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –†–æ–ª—å: –ø—Ä–æ–¥–∞–∫—Ç/—Ç–µ—Ö–ª–∏–¥. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ **Codex (CLI/Web)** –ª–∏–±–æ –≤ –ª—é–±–æ–º serverless-—Å—Ç–µ–∫–µ (Next.js/Astro) ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∏–∂–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã.
- –¶–µ–ª—å: —Å–æ–±—Ä–∞—Ç—å –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–∏–¥—ã –Ω–∞ —Ä–µ–º–æ–Ω—Ç —Å–∞–Ω—É–∑–ª–∞ **–ø–æ–¥ –∫–ª—é—á** –≤–æ –í—Ä–æ—Ü–ª–∞–≤–µ –∏ —Ä–∞–¥–∏—É—Å–µ 30 –∫–º.

---

## 1) KPI –∏ —Ü–µ–ª–∏
- CR ‚Üí –ª–∏–¥ (—Å –∫–≤–∏–∑–æ–º): **‚â•8% –º–æ–±–∞–π–ª / ‚â•10% –¥–µ—Å–∫—Ç–æ–ø**.
- –í—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ª–∏–¥ (–∞–¥–º–∏–Ω —É–≤–µ–¥–æ–º–ª—ë–Ω): **‚â§5 –º–∏–Ω**.
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–æ–±–∞–π–ª): **LCP ‚â§ 2.5s**, **PageSpeed ‚â• 90**, **JS ‚â§ 200 KB**.

---

## 2) –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏ —è–∑—ã–∫–∏
- –Ø–∑—ã–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞: **PL (default)**, EN, UA.
- –ê–≤—Ç–æ–≤—ã–±–æ—Ä –ø–æ `Accept-Language`, —Ä—É—á–Ω–æ–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å (sticky).
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –≤ cookie/localStorage.
- –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (e-mail/WA) ‚Äî –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —è–∑—ã–∫–µ.

---

## 3) –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–æ–¥–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/`)
1. **Hero (Above the fold)**  
   –ó–∞–≥–æ–ª–æ–≤–æ–∫, –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫, –∫–Ω–æ–ø–∫–∏: **Napisz na WhatsApp**, **Zadzwo≈Ñ teraz**, **Wyce≈Ñ w 60 s**.
2. **–í—ã–≥–æ–¥—ã (–∏–∫–æ–Ω–∫–∏)**  
   Sta≈Çy kosztorys 48h, p≈Çatno≈õƒá etap–∞–º–∏, zakup/logistyka, czysty monta≈º, gwarancja 24 mies.
3. **–ö–≤–∏–∑/–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (5‚Äì6 —à–∞–≥–æ–≤)**  
   –í–∏–ª–∫–∞ —Ü–µ–Ω—ã –∏ —Å—Ä–æ–∫ ‚Üí —Ñ–æ—Ä–º–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞ (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥).
4. **–ö–µ–π—Å—ã (2‚Äì4)**  
   –î–æ/–ø–æ—Å–ª–µ, –º–µ—Ç—Ä–∞–∂, —Å—Ä–æ–∫, –±—é–¥–∂–µ—Ç —Ä–∞–±–æ—Ç, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏.
5. **–ü—Ä–æ—Ü–µ—Å—Å (4 —à–∞–≥–∞)**  
   Pomiar ‚Üí Kosztorys ‚Üí Umowa/Zakup ‚Üí Monta≈º/Odbi√≥r/Gwarancja.
6. **FAQ (6‚Äì8)**  
   –¶–µ–Ω–∞, —Å—Ä–æ–∫–∏, –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –≥–∞—Ä–∞–Ω—Ç–∏—è, –æ–ø–ª–∞—Ç–∞, —á–∏—Å—Ç–æ—Ç–∞/—à—É–º.
7. **–ö–æ–Ω—Ç–∞–∫—Ç/–∫–∞—Ä—Ç–∞**  
   –ö–æ—Ä–æ—Ç–∫–∞—è —Ñ–æ—Ä–º–∞, –∫–Ω–æ–ø–∫–∏ WhatsApp/Call, —á–∞—Å—ã, –∑–æ–Ω–∞ Wroc≈Çaw +30 km.
8. **–§—É—Ç–µ—Ä**  
   –ö–æ–Ω—Ç–∞–∫—Ç—ã, –ø–æ–ª–∏—Ç–∏–∫–∞, —Å–æ–≥–ª–∞—Å–∏—è (RODO), NAP.

---

## 4) –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ—Ç–æ–∫–∏ (flows)
- **Flow A (–±—ã—Å—Ç—Ä—ã–π):** –ö–ª–∏–∫ –ø–æ **WhatsApp** ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–∞—Ç (deeplink) —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º.  
- **Flow B (–∫–≤–∏–∑):** 5‚Äì6 —à–∞–≥–æ–≤ ‚Üí —Ä–∞—Å—á—ë—Ç –≤–∏–ª–∫–∏ ‚Üí –≤–≤–æ–¥ –∫–æ–Ω—Ç–∞–∫—Ç–∞ ‚Üí —Å–ø–∞—Å–∏–±–æ-—ç–∫—Ä–∞–Ω —Å –∫–Ω–æ–ø–∫–æ–π **Otw√≥rz czat w WhatsApp** + –ø–∏—Å—å–º–æ —Å —á–µ–∫-–ª–∏—Å—Ç–æ–º.  
- **Flow C (–∑–≤–æ–Ω–æ–∫):** Click-to-Call `tel:+48‚Ä¶`.

---

## 5) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤ Codex (—Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã)

### 5.1 –§—É–Ω–∫—Ü–∏–∏
- `estimate.calculate` ‚Äî —Ä–∞—Å—á—ë—Ç –≤–∏–ª–∫–∏ (serverless).
- `leads.create` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (Sheets/CRM), –ø–∏—Å—å–º–∞, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è WA-deeplink, **—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –∞–¥–º–∏–Ω—É**.
- `whatsapp.build_link` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è `wa.me` —Å—Å—ã–ª–∫–∏ —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º.
- `notify.telegram` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω—Å–∫–∏–π –¢–ì.
- `ab.assign_bucket` ‚Äî A/B –≤–∞—Ä–∏–∞–Ω—Ç (–∑–∞–≥–æ–ª–æ–≤–æ–∫/—Ñ–æ—Ä–º–∞).

### 5.2 –°–µ–∫—Ä–µ—Ç—ã
- –ü–æ—á—Ç–∞: `SMTP_HOST`, `SMTP_PORT`, `SMTP_USER`, `SMTP_PASS`, `FROM_EMAIL`.  
- Telegram: `TELEGRAM_BOT_TOKEN`, `TELEGRAM_CHAT_ID`.  
- Google Sheets/CRM: `SHEETS_ID` **–∏–ª–∏** `PIPEDRIVE_API_KEY`.  
- –ê–Ω—Ç–∏–±–æ—Ç: `TURNSTILE_SITE_KEY`, `TURNSTILE_SECRET_KEY`.

---

## 6) –ö–≤–∏–∑/–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä ‚Äî –ø–æ–ª—è –∏ –ª–æ–≥–∏–∫–∞

### 6.1 –ü–æ–ª—è —à–∞–≥–æ–≤
1. `bathroom_type`: `bathroom` | `toilet` | `combined`  
2. `area_m2`: `2-4` | `4-6` | `6-8` | `8+`  
3. `scope`: `tiling_only` | `full_renovation_no_furniture` | `turnkey_with_fixtures_furniture`  
4. `tile_type`: `<=60x60` | `>=60x120` | `mosaic`  
5. `plumbing` (—Ñ–ª–∞–≥–∏): `wall_hung_wc`, `shower_or_bath`, `vanity_sink`, `rain_shower`, `floor_heating`  
6. `materials`: `client` | `contractor` | `mixed`

### 6.2 –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞ (TypeScript, —Ä–µ—Ñ–µ—Ä–µ–Ω—Å)
```ts
type AreaRange = "2-4"|"4-6"|"6-8"|"8+";
type Scope = "tiling_only"|"full_renovation_no_furniture"|"turnkey_with_fixtures_furniture";
type TileType = "<=60x60"|">=60x120"|"mosaic";

function midpoint(area: AreaRange): number {
  switch(area){
    case "2-4": return 3;
    case "4-6": return 5;
    case "6-8": return 7;
    case "8+":  return 9; // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –æ—Ä–∏–µ–Ω—Ç–∏—Ä, —É—Ç–æ—á–Ω—è–µ—Ç—Å—è –Ω–∞ –∑–∞–º–µ—Ä–µ
  }
}

export function calculateEstimate(
  area_m2: AreaRange,
  scope: Scope,
  tile_type: TileType,
  plumbing: { wall_hung_wc:boolean; shower_or_bath:boolean; vanity_sink:boolean; rain_shower:boolean; floor_heating:boolean; }
){
  const baseRate: Record<Scope, number> = {
    tiling_only: 800,
    full_renovation_no_furniture: 1200,
    turnkey_with_fixtures_furniture: 1500
  };

  const area = midpoint(area_m2);
  let labor = baseRate[scope] * area;

  const tileCoef: Record<TileType, number> = {
    "<=60x60": 1.00,
    ">=60x120": 1.15,
    "mosaic": 1.20
  };
  labor *= tileCoef[tile_type];

  const demolitionCoef = (scope === "tiling_only") ? 1.05 : 1.20;
  labor *= demolitionCoef;

  let addons = 0;
  if (plumbing.wall_hung_wc) addons += 800;
  if (plumbing.shower_or_bath) addons += 1200;
  if (plumbing.vanity_sink) addons += 700;
  if (plumbing.rain_shower) addons += 900;
  if (plumbing.floor_heating) addons += 300 * area;

  const estimate_low  = Math.round((labor * 0.95 + addons * 0.9) / 100) * 100;
  const estimate_high = Math.round((labor * 1.10 + addons * 1.1) / 100) * 100;

  // —Å—Ä–æ–∫–∏
  let daysMin = 12, daysMax = 18;
  if (scope === "tiling_only") { daysMin = 8; daysMax = 12; }
  if (scope === "full_renovation_no_furniture") { daysMin = 12; daysMax = 18; }
  if (scope === "turnkey_with_fixtures_furniture") { daysMin = 12; daysMax = 20; }
  if (tile_type !== "<=60x60") daysMax += 2;
  if (plumbing.floor_heating) daysMax += 1;

  return { low: estimate_low, high: estimate_high, days_min: daysMin, days_max: daysMax };
}
```

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —Ü–∏—Ñ—Ä—ã ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã –¥–ª—è MVP. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∫–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ 10‚Äì15 –ª–∏–¥–æ–≤.

---

## 7) –ö–æ–Ω—Ç—Ä–∞–∫—Ç API (OpenAPI)

### 7.1 `/api/estimate` (POST)
```yaml
openapi: 3.0.0
info:
  title: Bathroom Estimate API
  version: 1.0.0
paths:
  /api/estimate:
    post:
      summary: Calculate price/time range from quiz answers
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [area_m2, scope, tile_type, plumbing]
              properties:
                area_m2: { type: string, enum: ["2-4","4-6","6-8","8+"] }
                scope: { type: string, enum: ["tiling_only","full_renovation_no_furniture","turnkey_with_fixtures_furniture"] }
                tile_type: { type: string, enum: ["<=60x60",">=60x120","mosaic"] }
                plumbing:
                  type: object
                  properties:
                    wall_hung_wc: { type: boolean }
                    shower_or_bath: { type: boolean }
                    vanity_sink: { type: boolean }
                    rain_shower: { type: boolean }
                    floor_heating: { type: boolean }
      responses:
        "200":
          description: Estimate result
          content:
            application/json:
              schema:
                type: object
                properties:
                  low: { type: integer }
                  high: { type: integer }
                  days_min: { type: integer }
                  days_max: { type: integer }
```

### 7.2 `/api/leads` (POST)
```yaml
paths:
  /api/leads:
    post:
      summary: Create lead, send notifications, return WhatsApp deeplink
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, phone, preferred_channel, lang, quiz_answers, estimate, consent]
              properties:
                name: { type: string, minLength: 2, maxLength: 60 }
                phone: { type: string, description: "E.164 (+48‚Ä¶)" }
                email: { type: string, nullable: true }
                preferred_channel: { type: string, enum: ["whatsapp","email","phone"] }
                callback_window: { type: string, enum: ["morning","day","evening"], nullable: true }
                lang: { type: string, enum: ["pl","en","ua"] }
                quiz_answers: { type: object }   # raw quiz payload
                estimate:
                  type: object
                  properties:
                    low: { type: integer } 
                    high: { type: integer }
                    days_min: { type: integer }
                    days_max: { type: integer }
                utm:
                  type: object
                  properties:
                    source: { type: string }
                    medium: { type: string }
                    campaign: { type: string }
                    term: { type: string }
                    content: { type: string }
                consent: { type: boolean }
      responses:
        "200":
          description: Lead created
          content:
            application/json:
              schema:
                type: object
                properties:
                  lead_id: { type: string }
                  whatsapp_deeplink: { type: string }
                  email_sent: { type: boolean }
```

---

## 8) –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `leads.create` (TypeScript, serverless)
```ts
import { calculateEstimate } from "./estimate";
import { buildWhatsAppLink } from "./wa";
import { notifyTelegram } from "./notify";
import { z } from "zod";
import { sendClientEmail, sendAdminEmail } from "./mail";
import { saveLead } from "./storage"; // Google Sheets/CRM adapter
import { verifyTurnstile } from "./turnstile";

const LeadSchema = z.object({
  name: z.string().min(2).max(60),
  phone: z.string().regex(/^\+?\d{8,16}$/), // –ø—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ E.164
  email: z.string().email().optional().or(z.literal("")),
  preferred_channel: z.enum(["whatsapp","email","phone"]),
  callback_window: z.enum(["morning","day","evening"]).optional(),
  lang: z.enum(["pl","en","ua"]),
  quiz_answers: z.record(z.any()),
  estimate: z.object({
    low: z.number(), high: z.number(), days_min: z.number(), days_max: z.number()
  }),
  utm: z.object({
    source: z.string().optional(), medium: z.string().optional(),
    campaign: z.string().optional(), term: z.string().optional(), content: z.string().optional()
  }).optional(),
  consent: z.boolean()
});

export default async function handler(req:any,res:any){
  if (req.method!=="POST") return res.status(405).end();
  // –ê–Ω—Ç–∏–±–æ—Ç
  const turnstileOk = await verifyTurnstile(req.headers["cf-turnstile-token"]);
  if (!turnstileOk) return res.status(403).json({error:"turnstile_failed"});

  const parsed = LeadSchema.safeParse(req.body);
  if (!parsed.success) return res.status(422).json({error:"validation_failed", details: parsed.error.flatten()});
  const lead = parsed.data;

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è deeplink –≤ WA (–¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –∏ –¥–ª—è –∞–¥–º–∏–Ω–∞)
  const deeplink = buildWhatsAppLink({
    phone: process.env.BUSINESS_WHATSAPP_PHONE!, // –≤–∞—à –±–∏–∑–Ω–µ—Å-–Ω–æ–º–µ—Ä
    lang: lead.lang,
    payload: {
      name: lead.name, phone: lead.phone,
      estimate: lead.estimate, callback: lead.callback_window
    }
  });

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (Sheets/CRM)
  const leadId = await saveLead({ ...lead, whatsapp_deeplink: deeplink });

  // –ü–∏—Å—å–º–∞
  const emailSent = await sendClientEmail(lead.lang, lead.email ?? "", lead.estimate);
  await sendAdminEmail({ lead, leadId, deeplink });

  // Telegram –∞–¥–º–∏–Ω—É (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
  await notifyTelegram({ lead, leadId, deeplink }).catch(()=>{ /* –ª–æ–≥ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞, –Ω–æ —Ñ—Ä–æ–Ω—Ç –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å */ });

  return res.status(200).json({ lead_id: leadId, whatsapp_deeplink: deeplink, email_sent: !!emailSent });
}
```

---

## 9) WhatsApp: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è deeplink (–±–µ–∑ API)
```ts
type Lang = "pl"|"en"|"ua";

export function buildWhatsAppLink(opts:{
  phone: string; // business WA number, digits only, e.g. "48500111222"
  lang: Lang;
  payload: {
    name: string; phone: string;
    estimate: { low:number; high:number; days_min:number; days_max:number; };
    callback?: "morning"|"day"|"evening";
  }
}){
  const t = {
    pl: (p:any)=>`Dzie≈Ñ dobry! Interesuje mnie ≈Çazienka pod klucz.
Szacunek: ${p.estimate.low}-${p.estimate.high} PLN, termin: ${p.estimate.days_min}-${p.estimate.days_max} dni.
Proszƒô o –∫–æ–Ω—Ç–∞–∫—Ç. Preferencja: ${p.callback ?? "Dowolnie"}.`,
    en: (p:any)=>`Hello! I'm interested in a turnkey bathroom.
Estimate: ${p.estimate.low}-${p.estimate.high} PLN, timeline: ${p.estimate.days_min}-${p.estimate.days_max} days.
Please contact me. Preference: ${p.callback ?? "Any"}.`,
    ua: (p:any)=>`–í—ñ—Ç–∞—é! –¶—ñ–∫–∞–≤–∏—Ç—å —Å–∞–Ω–≤—É–∑–æ–ª –ø—ñ–¥ –∫–ª—é—á.
–û—Ü—ñ–Ω–∫–∞: ${p.estimate.low}-${p.estimate.high} PLN, —Ç–µ—Ä–º—ñ–Ω: ${p.estimate.days_min}-${p.estimate.days_max} –¥–Ω—ñ–≤.
–ü—Ä–æ—à—É –∑–≤‚Äô—è–∑–æ–∫. –ü–æ–±–∞–∂–∞–Ω–Ω—è: ${p.callback ?? "–ë—É–¥—å-–∫–æ–ª–∏"}.`
  }[opts.lang](opts.payload);

  const text = encodeURIComponent(t);
  return `https://wa.me/${opts.phone}?text=${text}`;
}
```

---

## 10) Telegram: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É
```ts
export async function notifyTelegram({ lead, leadId, deeplink }:{
  lead:any; leadId:string; deeplink:string;
}){
  const api = `https://api.telegram.org/bot${process.env.TELEGRAM_BOT_TOKEN}/sendMessage`;
  const langFlag = {pl:"üáµüá±", en:"üá¨üáß", ua:"üá∫üá¶"}[lead.lang] || "";
  const text =
`*Nowy lead ‚Äî ≈Åazienka pod klucz (Wroc≈Çaw +30 km)*
ID: \`${leadId}\`
Imiƒô: *${lead.name}*
Telefon: [${lead.phone}](tel:${lead.phone})  (${lead.preferred_channel})
Jƒôzyk: ${langFlag} ${lead.lang.toUpperCase()}

*Zakres*: ${lead.quiz_answers?.scope} | *Pow.*: ${lead.quiz_answers?.area_m2} | *P≈Çytka*: ${lead.quiz_answers?.tile_type}
*Dodatki*: WC:${lead.quiz_answers?.plumbing?.wall_hung_wc?'‚úì':'‚Äî'}, Prysz/Wanna:${lead.quiz_answers?.plumbing?.shower_or_bath?'‚úì':'‚Äî'}, Umywalka:${lead.quiz_answers?.plumbing?.vanity_sink?'‚úì':'‚Äî'}, Deszczownica:${lead.quiz_answers?.plumbing?.rain_shower?'‚úì':'‚Äî'}, Ogrzewanie:${lead.quiz_answers?.plumbing?.floor_heating?'‚úì':'‚Äî'}

*Szacunek*: ${lead.estimate.low}-${lead.estimate.high} PLN | ${lead.estimate.days_min}-${lead.estimate.days_max} dni
UTM: ${lead.utm?.source ?? '-'} / ${lead.utm?.medium ?? '-'} / ${lead.utm?.campaign ?? '-'}
*WA:* [Otw√≥rz czat](${deeplink})`;

  await fetch(api, {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      chat_id: process.env.TELEGRAM_CHAT_ID,
      parse_mode: "Markdown",
      disable_web_page_preview: true,
      text
    })
  });
}
```

---

## 11) –ü–∏—Å—å–º–∞ (–∫–ª–∏–µ–Ω—Ç –∏ –∞–¥–º–∏–Ω)

### 11.1 –ö–ª–∏–µ–Ω—Ç (PL/EN/UA)
```txt
[PL] Temat: Wycena ≈Çazienki ‚Äî potwierdzenie zg≈Çoszenia
Dziƒôkujemy za zg≈Çoszenie. W za≈ÇƒÖczniku ‚Äî lista kontroli odbioru ≈Çazienki (PDF).
Skontaktujemy siƒô dzi≈õ –¥–æ {hh:mm}. Szacunek: {low}‚Äì{high} PLN, {days_min}‚Äì{days_max} dni.
```
```txt
[EN] Subject: Bathroom quote ‚Äî confirmation
Thanks for your request. Attached: bathroom handover checklist (PDF).
We‚Äôll contact you by {hh:mm} today. Estimate: {low}‚Äì{high} PLN, {days_min}‚Äì{days_max} days.
```
```txt
[UA] –¢–µ–º–∞: –ö–æ—à—Ç–æ—Ä–∏—Å —Å–∞–Ω–≤—É–∑–ª–∞ ‚Äî –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
–î—è–∫—É—î–º–æ –∑–∞ –∑–∞—è–≤–∫—É. –£ –¥–æ–¥–∞—Ç–∫—É ‚Äî —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏–π–º–∞–Ω–Ω—è —Å–∞–Ω–≤—É–∑–ª–∞ (PDF).
–ó–≤‚Äô—è–∂–µ–º–æ—Å—å —Å—å–æ–≥–æ–¥–Ω—ñ –¥–æ {hh:mm}. –û—Ü—ñ–Ω–∫–∞: {low}‚Äì{high} PLN, {days_min}‚Äì{days_max} –¥–Ω—ñ–≤.
```

### 11.2 –ê–¥–º–∏–Ω (e-mail, –∫—Ä–∞—Ç–∫–æ)
```txt
Subject: [Lead] ≈Åazienka ‚Äî {name} ‚Äî {low}-{high} PLN
Body: —Å—Å—ã–ª–∫–∞ tel:+, deeplink WhatsApp, –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –∫–≤–∏–∑–∞, UTM.
```

---

## 12) I18n (–∫–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ UI)
```json
{
  "pl": {
    "hero_h1": "≈Åazienka –ø–æ–¥ klucz we Wroc≈Çawiu w 12‚Äì20 dni",
    "hero_sub": "Sta≈Çy kosztorys, zakup materia≈Ç√≥w, czysty monta≈º, 24 mies. gwarancji",
    "cta_whatsapp": "Napisz –Ω–∞ WhatsApp",
    "cta_call": "Zadzwo≈Ñ teraz",
    "cta_quote": "Wyce≈Ñ w 60 s",
    "result_note": "Zostaw –∫–æ–Ω—Ç–∞–∫—Ç ‚Äî wy≈õlemy dok≈Çadny kosztorys –∏ 3 uk≈Çady p≈Çytek."
  },
  "en": {
    "hero_h1": "Bathroom renovation, turnkey ‚Äî Wroc≈Çaw in 12‚Äì20 days",
    "hero_sub": "Fixed quote, materials supplied, clean installation, 24-month warranty",
    "cta_whatsapp": "Message on WhatsApp",
    "cta_call": "Call now",
    "cta_quote": "Get a 60-sec estimate",
    "result_note": "Leave your contact ‚Äî we‚Äôll send a precise quote and 3 tile layouts."
  },
  "ua": {
    "hero_h1": "–°–∞–Ω–≤—É–∑–æ–ª –ø—ñ–¥ –∫–ª—é—á —É –í—Ä–æ—Ü–ª–∞–≤—ñ –∑–∞ 12‚Äì20 –¥–Ω—ñ–≤",
    "hero_sub": "–§—ñ–∫—Å–æ–≤–∞–Ω–∏–π –∫–æ—à—Ç–æ—Ä–∏—Å, –∑–∞–∫—É–ø—ñ–≤–ª—è –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤, —á–∏—Å—Ç–∏–π –º–æ–Ω—Ç–∞–∂, –≥–∞—Ä–∞–Ω—Ç—ñ—è 24 –º—ñ—Å.",
    "cta_whatsapp": "–ù–∞–ø–∏—Å–∞—Ç–∏ –≤ WhatsApp",
    "cta_call": "–ü–æ–¥–∑–≤–æ–Ω–∏—Ç–∏ –∑–∞—Ä–∞–∑",
    "cta_quote": "–û—Ü—ñ–Ω–∏—Ç–∏ –∑–∞ 60 —Å",
    "result_note": "–ó–∞–ª–∏—à—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç ‚Äî –Ω–∞–¥—ñ—à–ª–µ–º–æ —Ç–æ—á–Ω–∏–π –∫–æ—à—Ç–æ—Ä–∏—Å —ñ 3 –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤–∏–∫–ª–∞–¥–∫–∏ –ø–ª–∏—Ç–∫–∏."
  }
}
```

---

## 13) –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (GA4 + –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ Ads)
–°–æ–±—ã—Ç–∏—è (client-side + server-side –¥—É–±–ª—å):
- `view_hero`, `click_sticky_cta`, `click_whatsapp`, `start_whatsapp_chat`,
- `quiz_step` `{step:n}`, `quiz_view_result`,
- `lead_submit`, `lead_valid`, `lead_reject`,
- `click_call`, `click_email`,
- `view_case`, `faq_open` `{id}`,
- `scroll_75`.

–ü—Ä–∏–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∏:
```js
gtag('event','lead_submit',{lang:'pl',scope:'turnkey_with_fixtures_furniture'});
```

---

## 14) –ê–Ω—Ç–∏—Å–ø–∞–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Cloudflare Turnstile** (score threshold), **honeypot**, **rate limit**: IP ‚â§ 5/min; –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚â§ 3/—Å—É—Ç–∫–∏.
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ E.164 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é üáµüá± +48).
- –õ–æ–≥–∏ –±–µ–∑ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ; —Å–µ–∫—Ä–µ—Ç—ã ‚Äî —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä.

---

## 15) RODO/GDPR (—Å–æ–≥–ª–∞—Å–∏—è)
–¢–µ–∫—Å—Ç—ã —Å–æ–≥–ª–∞—Å–∏–π —Ä—è–¥–æ–º —Å —Ñ–æ—Ä–º–æ–π:
```txt
[PL] ‚ÄûWyra≈ºam zgodƒô na przetwarzanie moich danych osobowych w celu przygotowania wyceny oraz kontaktu zwrotnego zgodnie z PolitykƒÖ prywatno≈õci.‚Äù
[EN] ‚ÄúI consent to the processing of my personal data for preparing the quote and follow-up contact, in accordance with the Privacy Policy.‚Äù
[UA] ¬´–ù–∞–¥–∞—é –∑–≥–æ–¥—É –Ω–∞ –æ–±—Ä–æ–±–∫—É –º–æ—ó—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –∑ –º–µ—Ç–æ—é –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫–æ—à—Ç–æ—Ä–∏—Å—É —Ç–∞ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –∑–≤‚Äô—è–∑–∫—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –ü–æ–ª—ñ—Ç–∏–∫–∏ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ.¬ª
```
–•—Ä–∞–Ω–∏—Ç—å: —Ñ–∞–∫—Ç —Å–æ–≥–ª–∞—Å–∏—è, –¥–∞—Ç–∞/–≤—Ä–µ–º—è, IP (—Ö–µ—à), –≤–µ—Ä—Å–∏—è —Ç–µ–∫—Å—Ç–∞, —è–∑—ã–∫.

---

## 16) –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ UX (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)
- –ë–µ–∑ –≤–∏–¥–µ–æ –Ω–∞ –ø–µ—Ä–≤–æ–º —ç–∫—Ä–∞–Ω–µ; **—Ä–µ–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ –∫–µ–π—Å–∞**.
- Sticky-–±–∞—Ä –Ω–∞ –º–æ–±–∏–ª–µ: —Å–ª–µ–≤–∞ **WhatsApp**, —Å–ø—Ä–∞–≤–∞ **Zadzwo≈Ñ**.
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è **WebP/AVIF**, lazy-load, —à—Ä–∏—Ñ—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ.
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: –∫–æ–Ω—Ç—Ä–∞—Å—Ç ‚â• 4.5:1, —Ñ–æ–∫—É—Å-—Å—Ç–∏–ª–∏, –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –∑–æ–Ω—ã ‚â• 44 px.

---

## 17) SEO / LocalBusiness JSON-LD
```html
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"LocalBusiness",
  "name":"≈Åazienka pod klucz ‚Äî Wroc≈Çaw",
  "areaServed":"Wroc≈Çaw, Poland (30 km)",
  "image":["https://example.com/case1.webp"],
  "telephone":"+48 500 111 222",
  "email":"contact@example.com",
  "url":"https://example.com",
  "address":{"@type":"PostalAddress","addressLocality":"Wroc≈Çaw","addressCountry":"PL"},
  "openingHours":"Mo-Sa 08:00-19:00",
  "priceRange":"PLN"
}
</script>
```

---

## 18) A/B-—Ç–µ—Å—Ç—ã (–≤–æ–ª–Ω–∞ 1)
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** —Å—Ä–æ–∫–∏ (12‚Äì20 –¥–Ω–µ–π) **vs** —Ñ–∏–∫—Å-—Å–º–µ—Ç–∞ –∑–∞ 48h.
- **–§–æ—Ä–º–∞:** –∫–≤–∏–∑ 5 —à–∞–≥–æ–≤ **vs** –∫–æ—Ä–æ—Ç–∫–∞—è —Ñ–æ—Ä–º–∞ (—Ç–µ–ª–µ—Ñ–æ–Ω + ¬´kiedy oddzwoniƒá?¬ª).
- **–õ–∏–¥-–º–∞–≥–Ω–∏—Ç:** —á–µ–∫-–ª–∏—Å—Ç PDF **vs** ¬´3 tile layouts¬ª (–ø—Ä–µ–≤—å—é –≤ –ø–∏—Å—å–º–µ).

---

## 19) –ü—Ä–∏—ë–º–æ—á–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞: `+48 512 345 678` –ø—Ä–æ—Ö–æ–¥–∏—Ç; `12345` ‚Äî –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è.
- –ë–µ–∑ —á–µ–∫–±–æ–∫—Å–∞ —Å–æ–≥–ª–∞—Å–∏—è ‚Äî —Å–∞–±–º–∏—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.
- –£—Å–ø–µ—à–Ω—ã–π –ª–∏–¥ ‚áí **Telegram** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚â§ 3 —Å, **e-mail –∫–ª–∏–µ–Ω—Ç—É** ‚â§ 2 –º–∏–Ω.
- –û—Ç–≤–µ—Ç `/api/leads` —Å–æ–¥–µ—Ä–∂–∏—Ç `lead_id`, `whatsapp_deeplink`, `email_sent`.
- GA4 —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç: `lead_submit`, `click_whatsapp`, `start_whatsapp_chat`.
- LCP ‚â§ 2.5s –Ω–∞ —ç–º—É–ª—è—Ü–∏–∏ 4G (Lighthouse Mobile).

---

## 20) –ö–æ–Ω—Ç–µ–Ω—Ç –∫ –∑–∞–ø—É—Å–∫—É
- 3 –∫–µ–π—Å–∞ (–¥–æ/–ø–æ—Å–ª–µ), —É –∫–∞–∂–¥–æ–≥–æ: –º–µ—Ç—Ä–∞–∂, —Å—Ä–æ–∫, –±—é–¥–∂–µ—Ç —Ä–∞–±–æ—Ç, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏.
- 10‚Äì12 —Ñ–æ—Ç–æ (–ø–æ—Ä—Ç—Ä–µ—Ç/–∞–ª—å–±–æ–º), 1-–º–∏–Ω—É—Ç–Ω–æ–µ –≤–∏–¥–µ–æ-–ø—Ä–æ–ª—ë—Ç.
- –õ–∏–¥-–º–∞–≥–Ω–∏—Ç: **—á–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏—ë–º–∫–∏ —Å–∞–Ω—É–∑–ª–∞** (1 —Å—Ç—Ä., PL/EN/UA, PDF).

---

## 21) .env (–ø—Ä–∏–º–µ—Ä)
```bash
FROM_EMAIL="no-reply@example.com"
SMTP_HOST="smtp.example.com"
SMTP_PORT="587"
SMTP_USER="user"
SMTP_PASS="pass"

TELEGRAM_BOT_TOKEN="123456:ABC..."
TELEGRAM_CHAT_ID="-1001234567890"

SHEETS_ID="1AbCdEf..."
TURNSTILE_SITE_KEY="..."
TURNSTILE_SECRET_KEY="..."

BUSINESS_WHATSAPP_PHONE="48500111222"
```

---

## 22) –§–æ–ª–±—ç–∫–∏ –∏ —Ä–∏—Å–∫–∏
- –ï—Å–ª–∏ Telegram –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí fallback: e-mail –∞–¥–º–∏–Ω—É, —Ä–µ—Ç—Ä–∞–∏ 0.5s/2s/5s.
- Deeplink WhatsApp –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å–∞–º –ø–æ —Å–µ–±–µ ‚Äî –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∫–ª–∏–∫–Ω—É—Ç—å (–æ–∂–∏–¥–∞–µ–º–æ).
- –í–∏–ª–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ ‚Äî **—Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç—ã**, –º–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Ç–¥–µ–ª—å–Ω–æ (—á—ë—Ç–∫–æ —É–∫–∞–∑–∞—Ç—å –≤ UI).

---

## 23) –°–Ω–∏–ø–ø–µ—Ç—ã UI (Hero, sticky-bar)

### 23.1 Hero –∫–Ω–æ–ø–∫–∏ (React/JSX)
```tsx
<div className="flex gap-3 flex-wrap">
  <a href="https://wa.me/48500111222" className="btn btn-primary">Napisz na WhatsApp</a>
  <a href="tel:+48500111222" className="btn btn-outline">Zadzwo≈Ñ teraz</a>
  <button className="btn btn-ghost" onClick={()=>openQuiz()} aria-label="Wyce≈Ñ w 60 s">Wyce≈Ñ w 60 s</button>
</div>
```

### 23.2 Sticky-bar (–º–æ–±–∞–π–ª)
```html
<div class="fixed bottom-0 left-0 right-0 flex">
  <a class="flex-1 p-4 text-center" href="https://wa.me/48500111222">Napisz na WhatsApp</a>
  <a class="flex-1 p-4 text-center" href="tel:+48500111222">Zadzwo≈Ñ</a>
</div>
```

---

## 24) FAQ (–∫–æ—Ä–æ—Ç–∫–æ, PL ‚Äî UI-–∫–æ–ø–∏—Ä–∞–π—Ç)
```txt
Ile trwa remont? Zwykle 12‚Äì20 dni ‚Äûpod klucz‚Äù. Termin potwierdzamy w umowie (z buforem na schniƒôcie).
Co z materia≈Çami? Zakup i logistyka po naszej stronie lub mieszany wari–∞–Ω—Ç ‚Äî pe≈Ç–Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Çem.
Jak liczy siƒô cena? Powierzchnia, demonta≈º/wykonanie podk≈Çad√≥w, —Ñ–æ—Ä–º–∞—Ç p≈Çytek, liczba –ø—É–Ω–∫—Ç√≥w wod.-–∫–∞–Ω., nisze/–æ–±—É–¥–æ–≤—ã.
Jakie sƒÖ p≈Çatno≈õci? Etapami: materia≈Çy ‚Üí etapy rob√≥t ‚Üí final po odbiorze.
Jaka gwarancja? 24 miesiƒÖce –Ω–∞ prace. –ù–∞ materia≈Çy ‚Äî zgodnie z producentem.
Jak z czysto≈õciƒÖ –∏ ha≈Çasem? Ochrona pod≈Ç√≥g, odkurzacz z —Ñ–∏–ª—å—Ç—Ä–æ–º budowlanym, wyw√≥z gruzu codziennie.
```

---

## 25) –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ —É–ª—É—á—à–µ–Ω–∏–π (–ø–æ—Å–ª–µ 2‚Äì3 –Ω–µ–¥–µ–ª—å)
- –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –∫–≤–∏–∑–∞ –ø–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º —Å–º–µ—Ç–∞–º/—á–µ–∫–∞–º.
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–æ—Ü-–ø—Ä—É—Ñ: ¬´Dzi≈õ 4 osoby otrzyma≈Çy wycenƒô¬ª.
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –≥–µ–æ: –∫–µ–π—Å—ã –∏–∑ –±–ª–∏–∂–∞–π—à–∏—Ö —Ä–∞–π–æ–Ω–æ–≤.
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ **WhatsApp Cloud API** (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã) ‚Äî –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ –≤–Ω–µ 24-—á–∞—Å–æ–≤–æ–≥–æ –æ–∫–Ω–∞.

---
